pipelines:
    hello-world:
        group: example
        materials:
            hello-world-git:
                git: https://github.com/hamvocke/spring-testing.git
        stages:
            - build-and-test:
                secure_variables:
                    WEATHER_API_KEY: "GQmLiJ4GmWIEGr9BzdWZDN4bwi3mNXmAj2qvTEJqxyqP53DiWmlq3g=="
                jobs:
                    build:
                        tasks:
                            - exec:
                                command: ./gradlew
                                arguments:
                                    - build

            - deploy-int:
                jobs:
                    deploy:
                        tasks:
                            - exec:
                                command: echo
                                arguments:
                                    - "Deploying to Int"
                    smoke-test:
                        tasks:
                            - exec:
                                command: echo
                                arguments:
                                    - "Running smoke tests"

            - end-to-end-test:
                jobs:
                    deploy:
                        tasks:
                            - exec:
                                command: echo
                                arguments:
                                    - "Running end to end tests"
